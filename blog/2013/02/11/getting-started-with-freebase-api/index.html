
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting Started with Freebase API - Wern Ancheta</title>
  <meta name="author" content="Wern Ancheta">

  
  <meta name="description" content="In this blog post I&rsquo;m going to show you the basics of using the Freebase API. What is Freebase? Freebase is a collection of data from different &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://anchetawern.github.io/blog/2013/02/11/getting-started-with-freebase-api">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Wern Ancheta" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/javascripts/libs/fancybox/source/jquery.fancybox.css">

<script src="/javascripts/contact.js"></script>

  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Wern Ancheta</a></h1>
  
    <h2>Adventures in Web Development.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:anchetawern.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/aboutme">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Getting Started With Freebase API</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-11T19:55:00+08:00" pubdate data-updated="true">Feb 11<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>In this blog post I&rsquo;m going to show you the basics of using the Freebase API.</p>

<h3>What is Freebase?</h3>

<p>Freebase is a collection of data from different sources.
So its basically like an encyclopedia in which you can pull data from.</p>

<p>Here&rsquo;s a diagram that shows exactly what type of data you can fetch from Freebase:</p>

<p><img src="/images/posts/getting_started_with_freebase/Freebase-Domains.jpg" alt="freebase diagram" /></p>

<p>You can also watch this video Introducing the knowledge graph:</p>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/mmQl6VGvX-c "></iframe></div>




<!--More-->


<h3>Playing with the API</h3>

<p>Most API&rsquo;s requires an API Key so that you could access its data but Freebase is different.
You have the choice whether or not to register an API key. If you just want to try things out
you can simply access the data from Freebase like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://www.googleapis.com/freebase/v1/search?query=nirvana&indent=true</span></code></pre></td></tr></table></div></figure>


<p>There are 2 parameters used in this url:</p>

<ul>
<li>query &ndash; what you want to search.</li>
<li>indent &ndash; can either be true or false, specify the value of true if you want to return a formatted json string so that you can easily read it.</li>
</ul>


<h4>Specifying Language</h4>

<p>You can also specify the language by using the <code>lang</code> parameter.
If you specified a non-supported language the API will also tell you:</p>

<p><img src="/images/posts/getting_started_with_freebase/unsupported_language.jpg" alt="unsupported language" /></p>

<h4>Filters</h4>

<p>But the true power of this API lies on the filters that you can use to specify what is exactly the type
of data that you&rsquo;re looking for. For example you want to be able to find music that has the name &ldquo;Robot&rdquo; on it:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://www.googleapis.com/freebase/v1/search?query=robot&indent=true&filter=(all%20type:music)</span></code></pre></td></tr></table></div></figure>


<p>The query above would return:</p>

<p><img src="/images/posts/getting_started_with_freebase/robot_music.jpg" alt="robot music" /></p>

<p>Another example would be if you&rsquo;re looking for &ldquo;One piece&rdquo; not the swimsuit but the <a href="http://en.wikipedia.org/wiki/One_Piece">manga/anime</a>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://www.googleapis.com/freebase/v1/search?query=one%20piece&indent=true&filter=(all%20type:animation)</span></code></pre></td></tr></table></div></figure>


<p>And as expected it returns only the data which refers to the &ldquo;One Piece&rdquo; anime/manga:</p>

<p><img src="/images/posts/getting_started_with_freebase/one_piece.jpg" alt="one piece anime" /></p>

<h3>Read Services</h3>

<p>The Freebase API is actually composed of several services which you can use separately or in tandem with other services. We will go over some of these services later on and implement it using PHP.</p>

<ul>
<li>Search Service</li>
<li>MQL Read Service</li>
<li>Topic API</li>
<li>RDF API</li>
<li>Text Service</li>
<li>Image Service</li>
<li>Freebase Suggest</li>
</ul>


<h3>Getting an API Key</h3>

<p>Once you&rsquo;ve played around the Freebase API a bit you might want to register an API key.
You can register from the <a href="https://code.google.com/apis/console/">Google API Console</a>.
It&rsquo;s free to register but when your application gets more and more users and it exceeds the limit for the free service Google will have you pay for the service.</p>

<p>If you haven&rsquo;t created a project with the Google console before you might need to create a new project.</p>

<p><img src="/images/posts/getting_started_with_freebase/new_project.jpg" alt="new project" /></p>

<p>Once that&rsquo;s done look for the Freebase API in the services tab and then enable it by turning it on:</p>

<p><img src="/images/posts/getting_started_with_freebase/freebase.jpg" alt="freebase" /></p>

<p>Accept the service agreement and then click on the API Access tab:</p>

<p><img src="/images/posts/getting_started_with_freebase/api_key.jpg" alt="api key" /></p>

<p>All you have to do now is copy the API key and use it on your requests by specifying a key parameter.
Using our previous query, your query will now look like this with the api key specified:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://www.googleapis.com/freebase/v1/search?query=one%20piece&indent=true&filter=(all%20type:animation)&key=xyz</span></code></pre></td></tr></table></div></figure>


<h3>Freebase with PHP</h3>

<p>Now that we&rsquo;ve played around with the Freebase API in the browser its time to access it using PHP.</p>

<p>First were going to build a simple class that will query the Freebase API for us.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">class</span> <span class="nc">Freebase</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"> </span>
</span></code></pre></td></tr></table></div></figure>


<p>Create a new private variable that will store the API key that we got from the Google console earlier.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">private $api_key = &#39;xyz&#39;;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Search Service</h4>

<p>Like I mentioned earlier we will go through some of the read services that the Freebase API offers.
So were going to create a method which will utilize these services in our class.</p>

<p>The service that we have gone over earlier was the Search service which simply allows you to search based on keywords.</p>

<p>Create a new method and call it search this will utilize the search service.
Here we have 1 required parameter ($query) and 5 optional parameters.
You can see a full list of the parameters that you can specify in the wiki for the <a href="http://wiki.freebase.com/wiki/ApiSearch">Search API</a>.</p>

<p>As you can see from the code below
were just building the URL from the arguments that we will supply later on when we call the method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">(</span><span class="nv">$query</span><span class="p">,</span> <span class="nv">$filter</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$limit</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">$exact</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$query</span><span class="p">)){</span>
</span><span class='line'>      <span class="nv">$query</span> <span class="o">=</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
</span><span class='line'>      <span class="nv">$url</span>    <span class="o">=</span> <span class="s1">&#39;https://www.googleapis.com/freebase/v1/search?query=&#39;</span><span class="o">.</span> <span class="nv">$query</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;filter=(&#39;</span> <span class="o">.</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$filter</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;start=&#39;</span> <span class="o">.</span> <span class="nv">$start</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;limit=&#39;</span> <span class="o">.</span> <span class="nv">$limit</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;exact=&#39;</span> <span class="o">.</span> <span class="nv">$exact</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;key=&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">api_key</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$url</span><span class="p">),</span> <span class="k">true</span><span class="p">)[</span><span class="s1">&#39;result&#39;</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>The important thing to note here is that the query should be <a href="http://php.net/manual/en/function.urlencode.php">url encoded</a> otherwise your query won&rsquo;t work properly if for example the query has spaces in it or some special characters.</p>

<p>You can see url encoding in action when you input your query manually in the address bar of the browser.
If you manually input our query earlier it will look like this before you type in enter:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">https://www.googleapis.com/freebase/v1/search?query=one piece&amp;indent=true&amp;filter=(all type:animation)&amp;key=xyz</span>
</span></code></pre></td></tr></table></div></figure>


<p>But once you press on enter all those spaces will be replaced with <code>%20</code> or <code>+</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">https://www.googleapis.com/freebase/v1/search?query=one%20piece&amp;indent=true&amp;filter=(all%20type:animation)&amp;key=xyz</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here&rsquo;s a <a href="http://www.w3schools.com/tags/ref_urlencode.asp">url encoding reference</a> from W3Schools.</p>

<p>The main meat of all the methods that we will be creating
for this class is the actual fetching of the data from the Freebase API.
We do the fetching by using a method called <code>file_get_contents</code> which takes a <code>url</code> as an argument and returns the contents (both html, javascript and text) of the page referenced by the url that you supplied.</p>

<p>But do note that <code>file_get_contents</code> doesn&rsquo;t work with every site or every API out there.
So in the case it doesn&rsquo;t work then you can use CURL instead.
There&rsquo;s a very gentle introduction on <a href="http://codular.com/curl-with-php">how to perform cURL request using PHP</a> at codular.</p>

<p>Also note that <code>file_get_contents</code> returns a warning if the content that you&rsquo;re requesting doesn&rsquo;t exist because of an HTTP Error or the API simply didn&rsquo;t find the data that you&rsquo;re requesting for.
In those cases you might want to include an <code>@</code> sign before the actual method name like <code>@file_get_contents</code> that way it wouldn&rsquo;t return a warning even if nothing is returned.</p>

<p>Lastly we use the <code>json_decode</code> method to convert the json string to a PHP array which we can easily manipulate or loop through.</p>

<h4>Image Service</h4>

<p>There&rsquo;s also the Image Service which simply returns an image base on the entity ID.
The entity ID can be a string or a number representing the entity.
But in my experience I notice that this service doesn&rsquo;t generalize if you query for something like &lsquo;naruto&rsquo;, &lsquo;ichigo&rsquo; or &lsquo;gundam&rsquo;. It can only return an image for a certain entity that is globally known like the following people or works:</p>

<ul>
<li>vincent_van_gogh</li>
<li>pablo_picasso</li>
<li>mona_lisa</li>
<li>the_scream</li>
<li>jose_rizal</li>
<li>andres_bonifacio</li>
<li>leonardo_da_vinci</li>
</ul>


<p>For the others which aren&rsquo;t globally known or entities which didn&rsquo;t deserve to have an actual index for the image service you can use the search service to get the entity ID and then use that entity ID to query the image service.
We&rsquo;ll go through that in a minute.</p>

<p>For now let&rsquo;s look at the method for fetching image from the image service.
We have 3 parameters, 1 required and 2 optional.</p>

<p>There&rsquo;s not really much parameters that you can specify for the image service, be sure to check out the wiki for the <a href="http://wiki.freebase.com/wiki/ApiImage">image service</a> to learn more.</p>

<p>The first parameter is the <code>entity_id</code> which for globally known entities can be just words separated by underscores like we saw earlier.
As you can see were not actually using the <code>file_get_contents</code> method here since we only need the url for the image we only return the url itself.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">public</span> <span class="k">function</span> <span class="nf">image</span><span class="p">(</span><span class="nv">$entity_id</span><span class="p">,</span> <span class="nv">$max_width</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="nv">$max_height</span> <span class="o">=</span> <span class="mi">150</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$entity_id</span><span class="p">)){</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;https://usercontent.googleapis.com/freebase/v1/image&#39;</span> <span class="o">.</span> <span class="nv">$entity_id</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;?maxwidth=&#39;</span> <span class="o">.</span> <span class="nv">$max_width</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;maxheight=&#39;</span> <span class="o">.</span> <span class="nv">$max_height</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;key=&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">api_key</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nv">$url</span><span class="p">;</span>      
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h4>Text Service</h4>

<p>The text service is different from the image service in that the
image service actually accepts the title or name of well-known entities as a value for the entity ID as well as the ID representing the entity itself.
But for the text service we can only utilize it once we&rsquo;ve
called the search service which returns the entity ID that we need.</p>

<p>The method has also a  <code>max_length</code> parameter which is simply used to specify the maximum length of the text that will be returned. <code>0</code> being no limit so it basically returns everything it can return.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">public</span> <span class="k">function</span> <span class="nf">text</span><span class="p">(</span><span class="nv">$entity_id</span><span class="p">,</span> <span class="nv">$max_length</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$entity_id</span><span class="p">)){</span>
</span><span class='line'>      <span class="nv">$url</span>    <span class="o">=</span> <span class="s1">&#39;https://www.googleapis.com/freebase/v1/text/&#39;</span> <span class="o">.</span> <span class="nv">$entity_id</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;?maxlength=&#39;</span> <span class="o">.</span> <span class="nv">$max_length</span><span class="p">;</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;key=&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">api_key</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$url</span><span class="p">),</span> <span class="k">true</span><span class="p">)[</span><span class="s1">&#39;result&#39;</span><span class="p">];</span>       
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h4>Topic API</h4>

<p>Lastly there&rsquo;s the topic API. There&rsquo;s actually 3 more services in the Freebase API which we haven&rsquo;t gone over but I&rsquo;ll leave those for another day. The topic API just like the text service and image service requires an entity ID for the request.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">public</span> <span class="k">function</span> <span class="nf">topic</span><span class="p">(</span><span class="nv">$entity_id</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$entity_id</span><span class="p">)){</span>
</span><span class='line'>      <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;https://www.googleapis.com/freebase/v1/topic&#39;</span> <span class="o">.</span> <span class="nv">$entity_id</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$url</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>        
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h3>Calling the Methods</h3>

<p>Now that were done creating the class its now time to actually call the methods
to produce some output. Create a new file and then import the class that we created earlier.
Also create an object of that class so that we can use it to call the methods.</p>

<p>What the code below does is just using the search method as the base data source
and then the image and text methods to fetch the image and a description for each entity
returned from our main search.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">require_once</span><span class="p">(</span><span class="s1">&#39;class.freebase.php&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$freebase</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Freebase</span><span class="p">();</span>
</span><span class='line'><span class="nv">$result</span> <span class="o">=</span> <span class="nv">$freebase</span><span class="o">-&gt;</span><span class="na">search</span><span class="p">(</span><span class="s1">&#39;Dragon ball z&#39;</span><span class="p">,</span> <span class="s1">&#39;all type:manga&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$result</span> <span class="k">as</span> <span class="nv">$entity</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$entity</span><span class="p">[</span><span class="s1">&#39;mid&#39;</span><span class="p">];</span>
</span><span class='line'>  <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$entity</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$image</span> <span class="o">=</span> <span class="nv">$freebase</span><span class="o">-&gt;</span><span class="na">image</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span class='line'>  <span class="nv">$text</span> <span class="o">=</span> <span class="nv">$freebase</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">&lt;li&gt;</span>
</span><span class='line'><span class="x">  &lt;h3&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$name</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/h3&gt;</span>
</span><span class='line'><span class="x">  &lt;img src=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$image</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&quot; alt=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$name</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
</span><span class='line'><span class="x">  &lt;p&gt;</span>
</span><span class='line'><span class="x">  </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$text</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"> </span>
</span><span class='line'><span class="x">  &lt;/p&gt;  </span>
</span><span class='line'><span class="x">&lt;/li&gt;</span>
</span><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h2>Resources</h2>

<ul>
<li><a href="http://wiki.freebase.com/wiki/ApiSearch">Search Service</a></li>
<li><a href="http://wiki.freebase.com/wiki/ApiImage">Image Service</a></li>
<li><a href="http://wiki.freebase.com/wiki/ApiText">Text Service</a></li>
<li><a href="http://wiki.freebase.com/wiki/Topic_API">Topic API</a></li>
<li><a href="http://wiki.freebase.com/wiki/Search_Cookbook">Search Cookbook</a></li>
<li><a href="http://www.w3schools.com/tags/ref_urlencode.asp">URL Encoding Reference</a></li>
<li><a href="https://dl.dropboxusercontent.com/u/126688107/tutorials/getting_started_with_freebase_api.7z">Sample Application Source Code</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Wern Ancheta</span></span>

      








  


<time datetime="2013-02-11T19:55:00+08:00" pubdate data-updated="true">Feb 11<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/api/'>api</a>, <a class='category' href='/blog/categories/freebase/'>freebase</a>, <a class='category' href='/blog/categories/search/'>search</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://anchetawern.github.io/blog/2013/02/11/getting-started-with-freebase-api/" data-via="wern_ancheta" data-counturl="http://anchetawern.github.io/blog/2013/02/11/getting-started-with-freebase-api/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/02/10/getting-started-with-amazon-product-advertising-api/" title="Previous Post: Getting Started with Amazon Product Advertising API">&laquo; Getting Started with Amazon Product Advertising API</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/03/03/should-everybody-learn-how-to-code/" title="Next Post: Should everyone learn how to code?">Should everyone learn how to code? &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/18/on-sleep/">On Sleep</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/12/on-driving/">On Driving</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/04/introduction-ton-l4b3/">Introduction to Laravel Bootstrap Starter</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/28/introduction-to-ahead/">Introduction to Ahead</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/21/introduction-to-publicizr/">Introduction to Publicizr</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/anchetawern">@anchetawern</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'anchetawern',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wernancheta?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wernancheta">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/104518132178203766400?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Wern Ancheta -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <span class="donate">
    <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=UR4FM6YHK6K38&amp;lc=PH&amp;item_name=Wern%20Ancheta%27s%20Blog&amp;currency_code=USD&amp;bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted">Buy me a cup of coffee</a>
  </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wernancheta';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://anchetawern.github.io/blog/2013/02/11/getting-started-with-freebase-api/';
        var disqus_url = 'http://anchetawern.github.io/blog/2013/02/11/getting-started-with-freebase-api/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="/javascripts/csshttprequest.min.js"></script>
<script>
if($('.entry-title').length == 1){
	var entry_title = $('.entry-title').text();
	CSSHttpRequest.get(
	    "http://phpdev-wern.rhcloud.com/crossdomain/counter.php?title=" + entry_title,
	    function(response){
	  		console.log('updated');  	
	    }
	);
}
</script>
</body>
</html>
