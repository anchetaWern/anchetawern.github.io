
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Wern Ancheta</title>
  <meta name="author" content="Wern Ancheta">

  
  <meta name="description" content="A few months ago I shared some of the development tools that I use in Windows. This time I&rsquo;m going to share some of the tools that I use for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://anchetaWern.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Wern Ancheta" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Wern Ancheta</a></h1>
  
    <h2>Adventures in Web Development.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:anchetaWern.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/portfolio">Portfolio</a></li>
  <li><a href="/aboutme">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/13/my-linux-development-environment/">My Linux Development Environment</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-13T21:34:00+08:00" pubdate data-updated="true">Jul 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A few months ago I shared some of the <a href="http://anchetawern.github.io/blog/2013/05/19/my-windows-development-environment/">development tools that I use in Windows</a>. This time I&rsquo;m going to share some of the tools that I use for developing in Linux.</p>

<h2>Curl</h2>

<p>Curl is a command line tool for getting resources from the internet. I commonly use it for installing other command line tools such as <code>composer</code> and testing access for different API&rsquo;s directly from the command line.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install curl
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install libcurl3 php5-curl</span></code></pre></td></tr></table></div></figure>


<h3>Sample Usage</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -sS https://getcomposer.org/installer | php</span></code></pre></td></tr></table></div></figure>


<h2>Node JS</h2>

<p>Node JS is basically server-side JavaScript. I don&rsquo;t currently use Node.js for my projects but I use it for installing NPM packages such as <code>grunt</code> and <code>bower</code>. NPM is short for Node Package Manager just like <code>apt-get</code> for Ubuntu you can use it for installing different command line tools. What&rsquo;s cool is that you don&rsquo;t really have to be using Node JS in order to make use of the awesomeness that&rsquo;s offered by NPM since most of the packages that are available from NPM aren&rsquo;t necessarily tools that are exclusive to be used for developing Node JS applications.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install python-software-properties python g++ make
</span><span class='line'>sudo add-apt-repository ppa:chris-lea/node.js
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install nodejs</span></code></pre></td></tr></table></div></figure>


<h3>Sample Usage</h3>

<p>You can install packages from the terminal using the <code>npm install</code> command. You can use the <code>-g</code> option to install the package globally, meaning you can directly use the commands available for the specific package that you installed from any terminal Window.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo npm install -g grunt-cli</span></code></pre></td></tr></table></div></figure>


<h2>Ruby</h2>

<p>I&rsquo;m not really into Ruby (not yet). I mainly install it because its required by Octopress which is the platform that I use for blogging.</p>

<h3>How to Install</h3>

<p>The easiest way to install Ruby is by using <a href="https://rvm.io/">RVM</a>, a command line tool that was specifically created to install, manage and work with multiple ruby environments.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -L https://get.rvm.io | bash -s stable
</span><span class='line'>rvm install 1.9.3
</span><span class='line'>rvm use 1.9.3
</span><span class='line'>rvm rubygems latest</span></code></pre></td></tr></table></div></figure>


<p>If RVM doesn&rsquo;t work for you you can also try <a href="https://github.com/scottmuc/yari">YARI</a> (short for Yet Another Ruby Installer).</p>

<h2>Composer</h2>

<p>Composer is a package manager for PHP. Much like <code>PEAR</code> but <code>PEAR</code> is already old school so composer is the way to go if you want to easily install PHP packages directly from the command line.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -sS https://getcomposer.org/installer | php
</span><span class='line'>sudo mv composer.phar /usr/local/bin/composer</span></code></pre></td></tr></table></div></figure>


<h2>Git</h2>

<p>Git is a distributed version control system. I mainly use it for maintaining sane snapshots of the applications that I develop. But its also useful for cloning existing tools directly into your machine.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo add-apt-repository ppa:pdoes/ppa
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install git-core</span></code></pre></td></tr></table></div></figure>


<h2>Apache</h2>

<p>Apache is the Web server that I use for serving the PHP applications that I create.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install apache2
</span><span class='line'>sudo /etc/init.d/apache2 restart</span></code></pre></td></tr></table></div></figure>


<h2>PHP</h2>

<p>PHP is the main language that I use for developing web applications.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install php5
</span><span class='line'>sudo apt-get install libapache2-mod-php5</span></code></pre></td></tr></table></div></figure>


<h2>MySQL</h2>

<p>MySQL is the database management system that I use with PHP developing dynamic applications.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install mysql-server
</span><span class='line'>sudo apt-get install php5-mysql</span></code></pre></td></tr></table></div></figure>


<h2>Octopress</h2>

<p>Octopress is the platform that I use for blogging. But aside from that it also installs a bunch of tools that I use for developing web applications (haml, sass, compass, etc.) so I&rsquo;m hitting 2 birds with one stone when I install Octopress.</p>

<h3>How to Install</h3>

<p>Octopress requires <code>Ruby 1.9.3</code> so you must install that one first. After that you can execute the following commands to install Octopress:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress
</span><span class='line'>gem install bundler
</span><span class='line'>bundle install
</span><span class='line'>rake install</span></code></pre></td></tr></table></div></figure>


<h2>Sublime Text</h2>

<p>Sublime Text is the text editor that I use since its very extensible because of the <a href="http://wbond.net/sublime_packages/package_control">package control</a>.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>add-apt-repository ppa:webupd8team/sublime-text-2
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo pt-get install sublime-text</span></code></pre></td></tr></table></div></figure>


<h3>Sublime Text Plugins</h3>

<ul>
<li><a href="https://github.com/wbond/sublime_alignment">Alignment</a></li>
<li><a href="https://github.com/kemayo/sublime-text-2-clipboard-history">Clipboard History</a></li>
<li><a href="https://github.com/facelessuser/BracketHighlighter">Bracket Highlighter</a></li>
<li><a href="https://github.com/daylerees/colour-schemes">Dayle Rees Color Schemes</a></li>
<li><a href="https://github.com/spadgos/sublime-jsdocs">DocBlockr</a></li>
<li><a href="http://emmet.io/">Emmet</a></li>
<li><a href="https://github.com/welovewordpress/SublimePhpTidy">PHPTidy</a></li>
<li><a href="https://github.com/titoBouzout/SideBarEnhancements">SidebarEnhancements</a></li>
<li><a href="https://github.com/benmatselby/sublime-phpcs">PHPCs</a></li>
</ul>


<h2>Koala</h2>

<p>Koala is a tool for automatically compiling and minifying less, sass, coffeescript, and compass files.</p>

<h3>How to Install</h3>

<p>You can install it by downloading directly from the website: <a href="http://koala-app.com/">koala-app</a>.
If you&rsquo;re having an issue with launching the app you can install <code>libudev 0</code>:</p>

<ul>
<li><a href="https://launchpad.net/ubuntu/+source/udev/175-0ubuntu19/+build/4325790/+files/libudev0_175-0ubuntu19_i386.deb">libudev 0 for 32bit</a></li>
<li><a href="https://launchpad.net/ubuntu/+source/udev/175-0ubuntu19/+build/4325788/+files/libudev0_175-0ubuntu19_amd64.deb">libudev 0 for 64bit</a></li>
</ul>


<h2>Chromium</h2>

<p>Chromium is the alternative for Google&rsquo;s Chrome browser in Linux. What&rsquo;s great about it is that it still has the Chrome Developers tools and you can also install some of the extensions that you already install on Chrome. You can install Chromium directly from the Ubuntu Software Center.
Here are some of the extensions that I usually install on Chromium to aid in my development:</p>

<ul>
<li><p><strong><a href="https://chrome.google.com/webstore/detail/axure-rp-extension-for-ch/dogkpdfcklifaemcdfbildhcofnopogp?hl=en">Axure RP Extension</a></strong> &ndash; useful for viewing RP Prototypes directly from the browser</p></li>
<li><p><strong><a href="https://chrome.google.com/webstore/detail/pagespeed-insights-by-goo/gplegfbjlmmehdoakndmohflojccocli?hl=en">PageSpeed Insights</a></strong> &ndash; an extension from Google which gives you some suggestions regarding what you can do to improve the performance of the website that you&rsquo;re developing.</p></li>
<li><p><strong><a href="https://chrome.google.com/webstore/detail/session-buddy/edacconmaakjimmfgnblocblbcdcpbko?hl=en">Session Buddy</a></strong> &ndash; I usually use this to create a snapshot of my current browser session so that I can always go back to them at a later time.</p></li>
<li><p><strong><a href="https://chrome.google.com/webstore/detail/web-developer/bfbameneiokkgbdmiekhjnmfkcnldhhm?hl=en">Web Developer</a></strong> &ndash; this extension adds a bunch of web developer tools to Chromium such as tools for validating HTML and CSS, displaying ARIA roles (useful for website accessibility purposes), and displaying the current browser size (useful for targeting a specific breakpoint when you&rsquo;re doing responsive design).</p></li>
</ul>


<h2>Filezilla</h2>

<p>Filezilla is an FTP client that I use for accessing the files for the websites that I work on. You can install it directly from the Ubuntu Software Center.</p>

<h2>Everpad</h2>

<p>My Evernote client of choice for Ubuntu. This is where I write all my todos for each day. Once I&rsquo;m done with a specific task I put a strikethrough in the list item to indicate that its already done.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo add-apt-repository ppa:nvbn-rm/ppa
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install everpad</span></code></pre></td></tr></table></div></figure>


<h3>Apt-Fast</h3>

<p>I use <code>apt-fast</code> as a replacement for <code>apt-get</code> for downloading and installing packages in Ubuntu. <code>apt-fast</code> is like <code>apt-get</code> on roller blades in that its very fast in downloading packages. You can use it by simply replacing the usual <code>apt-get</code> with <code>apt-fast</code>.</p>

<h3>How to Install</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo add-apt-repository ppa:apt-fast/stable
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install apt-fast</span></code></pre></td></tr></table></div></figure>


<h2>Virtualbox</h2>

<p>Virtualbox is an open-source OS virtualization application which you can use to install and use different Operating Systems right inside Ubuntu. Its very useful for when you need to use an application that&rsquo;s not available on Ubuntu (E.g. IE 9 and 10). You can install Virtualbox via the Ubuntu Software Center.</p>

<h2>Skype</h2>

<p>Skype is the instant messaging application that I use for collaborating with co-employees since I&rsquo;m working remotely. As of the time of writing Skype is available for Ubuntu 10.04 32-bit on the <a href="http://www.skype.com/en/download-skype/skype-for-computer/">Skype website</a> but you can also install it on higher versions of Ubuntu.</p>

<h2>Dropbox</h2>

<p>Dropbox is the application that I use for easily sharing files. I mostly use it for work when I have to share a screenshot or a text file. I use it over Skype file sharing because the receiver doesn&rsquo;t have to download the file on their machine just to view it. With Dropbox I can simply share the link via Skype and the receiver can simply open it up on their browser. You can install Dropbox directly from the Ubuntu Software Center.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/03/spatial-search-with-apache-solr-and-google-maps/">Spatial Search With Apache Solr and Google Maps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-03T21:33:00+08:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this tutorial I&rsquo;m going to show you how to setup spatial search in Apache Solr then were going to create an application which uses Spatial searching with the use of Google Maps.</p>

<h2>What is Spatial Searching?</h2>

<p>According to <a href="https://en.wikipedia.org/wiki/Geomatics">Wikipedia</a>:</p>

<blockquote><p>Geospatial technology or geomatics engineering is the discipline of gathering, storing, processing, and delivering geographic information, or spatially referenced information.</p></blockquote>


<p>For the purposes of this tutorial were going to use Spatial search to find the locations which are near the place that we specify.</p>

<h2>Configure schema.xml File</h2>

<p>First you need to configure the <code>schema.xml</code> to include a special field type called location. This field type is specifically used for geospatial searching. Depending on the Solr version that you&rsquo;re running on your machine it may or may not already be included on the default <code>schema.xml</code> file. But in case its not already included, here&rsquo;s what you have to add:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;fieldType</span> <span class="na">name=</span><span class="s">&quot;location&quot;</span> <span class="na">class=</span><span class="s">&quot;solr.LatLonType&quot;</span> <span class="na">subFieldType=</span><span class="s">&quot;tdouble&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you can create a dynamic field that would use that specific field type by simply supplying the value for the <code>type</code> attribute to be <code>location</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;dynamicField</span> <span class="na">name=</span><span class="s">&quot;locm_*&quot;</span> <span class="na">type=</span><span class="s">&quot;location&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="na">multiValued=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>After that you can now declare fields which will use the dynamic field:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;locm_places&quot;</span><span class="nt">&gt;</span>12.3456,-987.65<span class="nt">&lt;/field&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see from the example above, you can use dynamic fields by using the its name as the prefix for any field. In this case the prefix that we used is <code>locm_</code>. On the dynamic field declaration earlier we used the star <code>*</code> to tell to Solr that any field which uses the strings before the star will be using the attributes for this dynamic field.</p>

<h2>Geocoding</h2>

<p>We need actual coordinates as our data-source for the project that were going to build later on so were going to use the Google Geocoding API to convert places into coordinates. I&rsquo;m just going to use some places in my town as an example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$places</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>  <span class="s1">&#39;San Fernando (La Union) Fire Station, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;San Fernando (La Union) PNR&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Catbangen Central School, Gualberto Street, San Fernando City, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Don Mariano Marcos Memorial State University, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;TESDA Regional Training Center, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Lorma Colleges, San Fernando City, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;marcos building san fernando la union&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;CICOSAT Medical Hospital, MacArthur Highway, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Gifted Learning Center, Gov. Nisce Street, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Union Christian College, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;High Altitude Discotheque, Aguila Road, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Bethany Hospital, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;sea and sky college san fernando la union&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;Chowking, Gov. Luna Street, San Fernando City, Region I, Philippines&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;saint williams cathedral san fernando la union&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;ilocanos norte community school&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;zaragosa elementary school&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;bacnotan national highschool&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;busel-busel elementary school&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;luna public cemetery&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;paratong elementary school&#39;</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>If you want you can also use places in your town. Just make sure you check it with the Google Geocoding API first so that you know that it actually returns something. You can just paste the following URL in your browser&rsquo;s address bar and replace <code>SOME_PLACE_THAT_YOU_KNOW</code> with an actual place that you know, well-known and highly accessible places in your town is a great choice since there will be a greater chance that its already been geocoded.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">http://maps.googleapis.com/maps/api/geocode/json?address=SOME_PLACE_THAT_YOU_KNOW&amp;sensor=false</span>
</span></code></pre></td></tr></table></div></figure>




<blockquote><p>It&#8217;s important that you set the sensor to false since were not actually using a device with a location sensor (GPS locator) in this application.</p></blockquote>


<p>Next we use the Google Geocoding API to convert the places that we specified earlier into a coordinate (latitude and longitude). Here were simply extracting the data returned from the Google Geocoding API for each of the places then storing it in a variable called <code>$data</code>. Then we convert it back to a JSON string using the <code>json_encode()</code> method.</p>

<blockquote><p>Id is a required attribute for documents indexed in Solr so we have to generate a unique ID for each of the places that were going to add. Also remember to use dynamic fields that are already available from the schema.xml file in Solr. In this case were using the dynamic field ss_* which has a data type of string to store the name of the place, and the dynamic field locm_* to store the coordinates of the place.</p></blockquote>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;http://maps.googleapis.com/maps/api/geocode/json?address=place&amp;sensor=false&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'><span class="nv">$id_prefix</span> <span class="o">=</span> <span class="s1">&#39;SUPER&#39;</span><span class="p">;</span> <span class="c1">//it&#39;s a good idea to prefix your Solr ID&#39;s just to make sure it won&#39;t have the same id as something that already exists</span>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$places</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$place</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$request_url</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;place&#39;</span><span class="p">,</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$place</span><span class="p">)</span> <span class="p">,</span> <span class="nv">$url</span><span class="p">);</span> <span class="c1">//replace the place string in the url with the urlencoded address</span>
</span><span class='line'>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$request_url</span><span class="p">);</span> <span class="c1">//make the actual request to the google geocoding api</span>
</span><span class='line'>  <span class="nv">$results</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span> <span class="c1">//google geocoding api returns a JSON string so we have to use json_decode() to convert it to an array</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nv">$data</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>      <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id_prefix</span> <span class="o">.</span> <span class="nv">$i</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;ss_place&#39;</span> <span class="o">=&gt;</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">address_components</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">short_name</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;locm_lat&#39;</span> <span class="o">=&gt;</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">geometry</span><span class="o">-&gt;</span><span class="na">location</span><span class="o">-&gt;</span><span class="na">lat</span> <span class="o">.</span> <span class="s1">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">geometry</span><span class="o">-&gt;</span><span class="na">location</span><span class="o">-&gt;</span><span class="na">lng</span>
</span><span class='line'>  <span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$doc</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span> <span class="c1">//convert the data to a json string</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Next make the request to the Solr server to update the index using <code>curl</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$solr_update_url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/solr/update/json&#39;</span><span class="p">;</span> <span class="c1">//the url for updating the solr index using a json document</span>
</span><span class='line'><span class="nv">$solr_commit_url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/solr/update?commit=true&#39;</span><span class="p">;</span> <span class="c1">//the url for commiting the updates</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>    <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">//specify that we want to return the response so we can store it in a variable</span>
</span><span class='line'>    <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;Content-type:application/json&quot;</span><span class="p">),</span> <span class="c1">//header type</span>
</span><span class='line'>    <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="nv">$solr_update_url</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">CURLOPT_POST</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">//specify that we want to post a data</span>
</span><span class='line'>    <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="nv">$doc</span><span class="p">,</span> <span class="c1">//the data that we want to post</span>
</span><span class='line'><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$update_response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
</span><span class='line'><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">//commit the changes to SOLR</span>
</span><span class='line'><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
</span><span class='line'><span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="nv">$solr_commit_url</span>
</span><span class='line'><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nv">$commit_response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
</span><span class='line'><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h2>Building the Application</h2>

<p>Now for the fun part, let&rsquo;s start building the application. You&rsquo;re going to need to download and link up the following resources if you want to follow along:</p>

<ul>
<li>jQuery</li>
<li>jQuery UI (Use the custom builder to only include the dependencies of jQuery UI slider and the Slider itself)</li>
<li>Google Maps API Key (you&rsquo;re going to need a Google Account, just access the <a href="http://code.google.com/apis/console">Google Console</a> and activate the Google Maps API)</li>
</ul>


<p>The application that were going to build is simple, were just going to need a text field in which the user will input the base location, then a slider to adjust the distance. The markers that points out the nearby places which matches the current distance will automatically be updated once the user moves the slider.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;jquery-ui/css/ui-lightness/jquery-ui-1.10.3.custom.min.css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
</span><span class='line'>  <span class="na">src=</span><span class="s">&quot;http://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&amp;sensor=false&amp;libraries=places&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;location&quot;</span><span class="nt">&gt;</span>Location:<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;location&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;slider&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map-canvas&quot;</span><span class="nt">&gt;&lt;/div&gt;</span><span class="c">&lt;!--the container of the map--&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;jquery.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;jquery-ui/js/jquery-ui-1.10.3.custom.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;script.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then on the <code>style.css</code> file sprinkle some css that will make the presentation slightly:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">html</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">body</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'>  <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#map-canvas</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">90</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#slider</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then on the <code>script.js</code> file add the code that will set the default map options. Were just going to make everything global so we can access them from anywhere.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">loc</span><span class="p">;</span> <span class="c1">//this will store information about the current base location selected by the user</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">markers_array</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">//this will store an array of the markers that were created</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//set the map options</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">map_options</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">center</span><span class="o">:</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="mf">16.61096000671</span><span class="p">,</span> <span class="mf">120.31346130371</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">zoom</span><span class="o">:</span> <span class="mi">17</span><span class="p">,</span> <span class="c1">//set zoom level to 17 </span>
</span><span class='line'>    <span class="nx">mapTypeId</span><span class="o">:</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">MapTypeId</span><span class="p">.</span><span class="nx">ROADMAP</span> <span class="c1">//set map type to road map</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//layout the map in the page</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map-canvas&quot;</span><span class="p">),</span> <span class="nx">map_options</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">homeLatlng</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="mf">18.35827827454</span><span class="p">,</span> <span class="mf">121.63744354248</span><span class="p">);</span> <span class="c1">//set the base coordinate</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//set the marker for the base coordinate</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">homeMarker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">position</span><span class="o">:</span> <span class="nx">homeLatlng</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">map</span><span class="o">:</span> <span class="nx">map</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">draggable</span><span class="o">:</span> <span class="kc">false</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//get the text field which the user will use to search for a base location</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">autocomplete</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">places</span><span class="p">.</span><span class="nx">Autocomplete</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span> <span class="c1">//google maps autocomplete</span>
</span><span class='line'>
</span><span class='line'><span class="nx">autocomplete</span><span class="p">.</span><span class="nx">bindTo</span><span class="p">(</span><span class="s1">&#39;bounds&#39;</span><span class="p">,</span> <span class="nx">map</span><span class="p">);</span> <span class="c1">//bind the selected place in the autocomplete text field to the map</span>
</span><span class='line'>      
</span><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm"> executed when a place is selected from the search bar</span>
</span><span class='line'><span class="cm"> this will automatically adjust the map settings to display the place that was entered in the text field</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'><span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">autocomplete</span><span class="p">,</span> <span class="s1">&#39;place_changed&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">place</span> <span class="o">=</span> <span class="nx">autocomplete</span><span class="p">.</span><span class="nx">getPlace</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//if the selected location has a geometry then show it on the map</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nx">place</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">viewport</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">map</span><span class="p">.</span><span class="nx">fitBounds</span><span class="p">(</span><span class="nx">place</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">viewport</span><span class="p">);</span> <span class="c1">//automatically adjust the display on the viewport</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>      <span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">(</span><span class="nx">place</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">location</span><span class="p">);</span> <span class="c1">//if the location doesn&#39;t have a geometry, use the location</span>
</span><span class='line'>      <span class="nx">map</span><span class="p">.</span><span class="nx">setZoom</span><span class="p">(</span><span class="mi">17</span><span class="p">);</span> <span class="c1">//set the zoom level to 17</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">homeMarker</span><span class="p">.</span><span class="nx">setMap</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span> <span class="c1">//place the marker in the map</span>
</span><span class='line'>    <span class="nx">homeMarker</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">place</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">location</span><span class="p">);</span> <span class="c1">//set the position of the marker based on the selected location</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//update the global variable which stores the current location</span>
</span><span class='line'>    <span class="nx">loc</span> <span class="o">=</span> <span class="nx">place</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add a method to clear the markers, this will be used to clear the markers every time the distance is updated:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear_markers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">markers_array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">markers_array</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setMap</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add the code for when the user moves the slider, were going to bind it to a text field so the actual value is visible to the user. The value will have a unit of kilometers.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#slider&quot;</span><span class="p">).</span><span class="nx">slider</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">slide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">ui</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">map</span><span class="p">.</span><span class="nx">clear_markers</span><span class="p">();</span> <span class="c1">//clear all the markers that are currently in the map</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nx">ui</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">//the selected distance</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//get the latitude and longitude from the location that we updated  earlier</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">coordinate</span> <span class="o">=</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">lat</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">lng</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//create the object which will store the data that were going to pass through solr</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="s1">&#39;coordinate&#39;</span> <span class="o">:</span> <span class="nx">coordinate</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;distance&#39;</span> <span class="o">:</span> <span class="nx">distance</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#distance&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">distance</span><span class="p">);</span> <span class="c1">//update the text field which shows the current distance</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//make the request</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;http://my.dev/tester/geocoding/get_nearby_places.php&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span> <span class="c1">//convert the JSON string to a JavaScript object</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">response</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">places</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">docs</span><span class="p">;</span> <span class="c1">//the actual places that were returned by solr</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">place_count</span> <span class="o">=</span> <span class="nx">places</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">markers</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//loop through all the places that were returned</span>
</span><span class='line'>        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">place_count</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">coordinate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">places</span><span class="p">[</span><span class="nx">x</span><span class="p">][</span><span class="s1">&#39;locm_lat&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span> <span class="c1">//convert the string to an array</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">lat</span> <span class="o">=</span> <span class="nx">coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">lng</span> <span class="o">=</span> <span class="nx">coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">//create the marker which points out the nearby places</span>
</span><span class='line'>          <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
</span><span class='line'>              <span class="nx">position</span><span class="o">:</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">lng</span><span class="p">),</span>
</span><span class='line'>              <span class="nx">map</span><span class="o">:</span> <span class="nx">map</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">//push the marker to the array which stores the markers so we can clear them later</span>
</span><span class='line'>          <span class="c1">//when user moves the slider again</span>
</span><span class='line'>          <span class="nx">markers_array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">marker</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally, add the code which will make the query to the Solr server to get the places which are near to the selected location. What were doing here is constructing the URL needed to make the request to the solr server, then getting the actual response that was returned and then outputting it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="c1">//the url for querying solr, 8080 is the port where solr is running</span>
</span><span class='line'><span class="nv">$url</span>  <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/solr/select?q=*:*&amp;fq=&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//the string that we need to replace in the query</span>
</span><span class='line'><span class="nv">$search</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>  <span class="s1">&#39;BASE_COORDINATE&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;DISTANCE&#39;</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//the string that were going to use as a query</span>
</span><span class='line'><span class="nv">$replace</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>  <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;coordinate&#39;</span><span class="p">],</span> <span class="c1">//the latitude and longitude pair (eg. 123.111,456.233)</span>
</span><span class='line'>  <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span> <span class="c1">//the selected distance</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//replace the placeholder text with the input supplied by the user then encode the part of the url which has the query</span>
</span><span class='line'><span class="nv">$url</span> <span class="o">.=</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="nv">$search</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">,</span> <span class="s1">&#39;{!geofilt pt=BASE_COORDINATE sfield=locm_lat d=DISTANCE}&#39;</span><span class="p">));</span>
</span><span class='line'><span class="nv">$url</span> <span class="o">.=</span> <span class="s1">&#39;&amp;wt=json&#39;</span><span class="p">;</span> <span class="c1">//set the response type to json</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span> <span class="c1">//get the json string returned from the query</span>
</span><span class='line'><span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span> <span class="c1">//output the json string</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>The output will look like this:</p>

<p><img src="/images/posts/spatial_search_with_apache_solr_and_google_maps/output.PNG" alt="asana" /></p>

<h2>Conclusion</h2>

<p>That&rsquo;s it for this tutorial, you&rsquo;ve learned how to use Solr&rsquo;s spatial search with Google Maps.
You can further improve the application that we just built. For example, you can make a distinction to the marker for the selected location by giving it a different color or icon since the marker for that is currently the same with the markers for locations which are near the selected location. You can also add filters, for example only show nearby restaurants to the location that you selected.</p>

<h2>Resources</h2>

<ul>
<li><a href="http://wiki.apache.org/solr/SpatialSearch">Solr Spatial Search</a></li>
<li><a href="https://developers.google.com/maps/">Google Maps API</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/15/getting-started-with-solr/">Getting Started With Apache Solr</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-15T12:35:00+08:00" pubdate data-updated="true">Jun 15<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this tutorial we&rsquo;ll be looking at Apache Solr.
Apache Solr is a search server. Its features include blazing fast searches, faceted search, handling of files such as PDF and Word.</p>

<h2>Installing Solr</h2>

<p>If you&rsquo;re on Windows you can install Solr by getting the installer from <a href="http://bitnami.com/stacks">BitNami</a>.
Just search for Solr, download the installer and install it on your machine.</p>

<h2>Solr Manager</h2>

<p>After the installation is complete you can now access the Solr Manager where you can Start, Stop or Restart the server.
If its not started yet click on the start button.</p>

<p><img src="/images/posts/getting_started_with_solr/solr_manager.PNG" alt="solr manager" /></p>

<h2>Solr Admin</h2>

<p>To test if Solr is working, access the Solr admin page from your browser. For me its at:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://localhost:8080/solr/#/</span></code></pre></td></tr></table></div></figure>


<p>The port depends on what port you have selected when you installed Solr.
If you&rsquo;re using Virtual hosts you can also access the Solr admin page using it:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://my.dev:8080/solr</span></code></pre></td></tr></table></div></figure>


<p>The Solr admin page currently looks like this. I&rsquo;m running version 4.3.0. It might look a little bit different if you have installed a different version:</p>

<p><img src="/images/posts/getting_started_with_solr/solr_admin.PNG" alt="solr admin" /></p>

<p>There&rsquo;s not really much that you can do with the Solr admin page.
The only parts that you might want to look at is the Logging and Core Selector.</p>

<p>The logging is where you can find warnings and errors with regards to the whole runtime of the Server.
The core selector is where you can select the collection that you want to manage.
Upon installation Solr already creates a default collection called <code>collection1</code>.
Any documents that you add will be automatically added to this collection.
That said, you can think of collections as drawers in which you store your documents.
In database terms they are like your database and the documents that you store on it are like the tables in a database.
Throughout this tutorial we&rsquo;ll only be working with the <code>collection1</code> collection.</p>

<h3>Overview</h3>

<p>Once you have selected a collection you can see an overview of it by clicking on the overview tab:</p>

<p><img src="/images/posts/getting_started_with_solr/overview.PNG" alt="collection overview" /></p>

<p>Information like the date the collection was last modified, number of documents, maximum number of documents, deleted documents can be seen from this page.</p>

<h3>Query</h3>

<p>The query tab is where you can play with some queries to manipulate the current collection. The default query is the select query which simply returns results which matches your query.
There&rsquo;s also the update query which is mainly used to update the contents of documents.</p>

<blockquote><p>Note that when using the select query in Solr you don&#8217;t usually specify the document in which the results that you&#8217;re looking for is stored. Solr simply knows where to find what you&#8217;re looking for without telling it where to find something.</p></blockquote>


<p>To use the query builder you simply need to specify what you&rsquo;re looking for.</p>

<p><img src="/images/posts/getting_started_with_solr/query_json.PNG" alt="query json" /></p>

<p>Here are some of the parameters that you can specify:</p>

<ul>
<li><strong>request handler</strong> &ndash; the action that you want Solr to do. The most common ones are <code>select</code> and <code>update</code>.
You can also create your own request handlers but that would be best discuss on another article.</li>
<li><strong>q</strong> &ndash; your query. Its common format is:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>field name:"query"</span></code></pre></td></tr></table></div></figure>


<p>So imagine we have added a document into Solr which composed of book names and their authors. If you want to get all the books whose title begins with the word &lsquo;national&rsquo; then here&rsquo;s what your query would look like:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>q=book_title:"national*"</span></code></pre></td></tr></table></div></figure>


<ul>
<li><strong>fq</strong> &ndash; short for filter query. If you want to filter the results returned by your query you can make use of this parameter. For example, if you want to select only the books which has a price within the range of 19 to 90 you do something like this:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fq=price:[19 TO 90]</span></code></pre></td></tr></table></div></figure>


<ul>
<li><strong>sort</strong> &ndash; sort is how you would like the results to be sorted. So if you want to sort the results by price in ascending order, that is books with lower price comes first and books with higher prices comes later. You do something like this:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sort=price asc</span></code></pre></td></tr></table></div></figure>


<ul>
<li><strong>fl</strong> &ndash; short for fields. This is the parameter where you can specify the fields that you want to return. So for example if you only want to return the book title and the price of the book you do something like:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fl=book_title,price</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p><strong>wt</strong> &ndash; short for writer type, but that doesn&rsquo;t make any sense so we&rsquo;ll go by the name response type. This allows you to specify the way the results will be formatted. In solr you can have one of the following:</p>

<ul>
<li>json</li>
<li>xml</li>
<li>php</li>
<li>ruby</li>
<li>python</li>
<li>csv</li>
</ul>
</li>
</ul>


<p>The default one used by Solr is <code>xml</code>. But the most commonly used is <code>json</code> since you can simply convert it to a data readable by php, ruby, python, javascript or probably any language that you can think of.</p>

<h3>Schema</h3>

<p>The schema tab is where the <code>schema.xml</code> file can be previewed in a nicely formatted way (with all the syntax highlighting goodness). The <code>schema.xml</code> file simply describes the fields for each collection. If you have worked with MySql database for a while this is like the <code>information_schema</code> database which shows you all the information you want to know about each of the databases, tables and fields in MySql.
But for the <code>schema.xml</code> file it only contains information about a specific collection. So each collection have its own <code>schema.xml</code> file. The <code>schema.xml</code> file is stored in the following directory for <code>collection1</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>C:\BitNami\solr-4.3.0-0\apache-solr\solr\collection1\schema.xml</span></code></pre></td></tr></table></div></figure>


<p>The <code>schema.xml</code> file contains a lot of information regarding the data stored in a collection. You can add new fields and field types into this file so that Solr will know what type of data the specific documents will store.
Fields in Solr comes in 2 forms:</p>

<ul>
<li><strong>Fields</strong> &ndash; allows you to specify field names that will directly match what field names you include in the documents that you want to add to Solr. Here&rsquo;s how to define a field that will store book titles:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;book_title&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span>  <span class="na">multiValued=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Fields commonly has 5 attributes which you can specify:</p>

<ul>
<li><p><strong>name</strong> &ndash; the name that you want to give to the field. This would be the same as the naming conventions for every database system or programming language that you can think of. So numbers and symbols can&rsquo;t be used as the start of a field name. Only alphanumeric characters and underscores are allowed for the field name.</p></li>
<li><p><strong>type</strong> &ndash; the type of data that the field will store. Common data types are: <code>float</code>, <code>long</code>, <code>short</code>, <code>double</code>, <code>string</code>, <code>date</code> and <code>text</code>.</p></li>
<li><p><strong>indexed</strong> &ndash; can either have a value of <code>true</code> or <code>false</code>. If you do not want the specific field to be searched you can use <code>false</code>. Using <code>false</code> simply means that using the specific field in a query won&rsquo;t return anything since it can&rsquo;t be searched on.</p></li>
<li><p><strong>stored</strong> &ndash; can either have a value of <code>true</code> or <code>false</code>. Use <code>false</code> if you do not want the field to be retrievable.</p></li>
<li><p><strong>multivalued</strong> &ndash; can either have a value of <code>true</code> or <code>false</code>. You use <code>true</code> if the field contains more than one value. For example a tag for a specific blog post. A blog post can have many tags so the tag field should have its <code>multivalued</code> attribute set to <code>true</code>.</p></li>
<li><p><strong>Dynamic Fields</strong> &ndash; allows you to specify a common data type, indexed, and stored value for fields which has a specific suffix. Here&rsquo;s how to define a dynamic field for fields which has integer and string data types:</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;dynamicField</span> <span class="na">name=</span><span class="s">&quot;*_i&quot;</span>  <span class="na">type=</span><span class="s">&quot;int&quot;</span>    <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;dynamicField</span> <span class="na">name=</span><span class="s">&quot;*_s&quot;</span>  <span class="na">type=</span><span class="s">&quot;string&quot;</span>  <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can also add copy fields which are used for copying one document to another when a document is added in the Solr index. It can be used to index the same field in a different way or adding multiple fields to the same field for faster indexing. Copy fields has 2 attributes, the <code>source</code> and the <code>destination</code>. The <code>source</code> is the field which you want to add a copy field to. And the destination can either have a value of a data type or an existing field.</p>

<p>Here&rsquo;s how to add a copy field into the <code>book_title</code> field to store a copy of the field with a data type of text:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;book_title&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span>  <span class="na">multiValued=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;copyField</span> <span class="na">source=</span><span class="s">&quot;book_title&quot;</span> <span class="na">dest=</span><span class="s">&quot;text&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Dynamic fields can also be used as the value for destination. So for example you have a field called <code>author</code> which has a data type of <code>text_general</code>. You add a copy field to it using the dynamic field which has a suffix of <code>_s</code>. So the value for destination would be the name of the field plus the suffix used in the dynamic field. The copy field would now be stored as a string since it will simply inherit the data type of the dynamic field:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">type=</span><span class="s">&quot;text_general&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span> <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;dynamicField</span> <span class="na">name=</span><span class="s">&quot;*_s&quot;</span>  <span class="na">type=</span><span class="s">&quot;string&quot;</span>  <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;copyField</span> <span class="na">source=</span><span class="s">&quot;author&quot;</span> <span class="na">dest=</span><span class="s">&quot;author_s&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Adding Documents</h2>

<p>By default Solr doesn&rsquo;t have any documents that you can work on. You&rsquo;ll have to manually add them.
There are 2 ways in which you can add documents. Either by using <code>post.sh</code> or <code>curl</code>.</p>

<p>There are some sample documents stored in the following directory in Windows once you install Solr:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>C:\BitNami\solr-4.3.0-0\apache-solr\exampledocs
</span></code></pre></td></tr></table></div></figure>


<p>Examine each of those files to see what&rsquo;s common with them. Solr expects a specific format in which the documents will be. For xml files it should adhere with this format:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;add&gt;</span>
</span><span class='line'>  <span class="nt">&lt;doc&gt;</span>
</span><span class='line'>      <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>123<span class="nt">&lt;/field&gt;</span>
</span><span class='line'>      <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;book_title&quot;</span><span class="nt">&gt;</span>Don&#39;t Make me think<span class="nt">&lt;/field&gt;</span>
</span><span class='line'>      <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;price&quot;</span><span class="nt">&gt;</span>39<span class="nt">&lt;/field&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/doc&gt;</span>
</span><span class='line'>  <span class="nt">&lt;doc&gt;</span>
</span><span class='line'>      ...
</span><span class='line'>  <span class="nt">&lt;/doc&gt;</span>
</span><span class='line'>  <span class="nt">&lt;doc&gt;</span>
</span><span class='line'>      ...
</span><span class='line'>  <span class="nt">&lt;/doc&gt;</span>
</span><span class='line'><span class="nt">&lt;/add&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can see from the markup above that you have to use <code>add</code> tags as a wrapper. This will tell Solr that the documents inside of it will be added to the index.
And each row in that document will be wrapped in <code>doc</code> tags. Each field will be wrapped in <code>field</code> tags.
Each field will have an attribute called <code>name</code> in which you specify the name of the field in which the value specified belongs.</p>

<blockquote><p>Note that documents has a required field called id. Your document won&#8217;t be indexed by Solr if it doesn&#8217;t have an `id` field. This uniquely identifies the row. If you have examined the sample documents you will see that each of them has an id field. Also note that the fields that you used in the documents that you want to add to Solr has fields which are already added to the schema.xml file otherwise the document won&#8217;t be added.</p></blockquote>


<p>To add those documents into the Solr index open the command line and navigate to the directory where the documents are stored:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>cd c:\BitNami\solr-4.3.0-0\apache-solr\exampledocs
</span></code></pre></td></tr></table></div></figure>


<p>Then run the following command to add all of the xml documents to the Solr index:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>post.sh *.xml
</span></code></pre></td></tr></table></div></figure>


<p>If you want to add a specific xml file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>post.sh books.xml
</span></code></pre></td></tr></table></div></figure>




<blockquote><p>Note that only xml documents can be added using post.sh. You can try using the curl method if you want to add a json document or any other type of document to the solr index.</p></blockquote>


<p>If you don&rsquo;t see any sort of errors once the command finished executing then you&rsquo;re good to go.
If not then you might need to add the fields used in each of those documents in the <code>schema.xml</code> file which you can find in the following directory if you&rsquo;re on Windows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>C:\BitNami\solr-4.3.0-0\apache-solr\solr\collection1\conf
</span></code></pre></td></tr></table></div></figure>


<p>To add a field you simply add a line like this in your <code>schema.xml</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;book_title&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span>  <span class="na">stored=</span><span class="s">&quot;true&quot;</span>  <span class="na">multiValued=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will tell Solr that the <code>book_title</code> field can be used in any of the documents that you will add to the Solr index.</p>

<blockquote><p>Note that you have to stop the Solr service from running when you&#8217;re editing the schema.xml file.<br/>Once you&#8217;re done with the changes you can simply start the service again so that the changes that you have in the schema.xml file will be reflected to the current instance of the service.</p></blockquote>


<h2>Manipulating the Data</h2>

<p>You can access the data from Solr server by going to the browser and visiting the following address:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>http://localhost:8080/solr/select?q=*:*
</span></code></pre></td></tr></table></div></figure>


<p>The host will normally be <code>localhost</code> if you&rsquo;re using Solr on your machine. The port depends on the port that you selected when you installed Solr. I&rsquo;ve already discussed earlier how you can query the Solr server. So what I&rsquo;ll discuss in this section is how to access and manipulate the data coming from Solr using PHP and JavaScript.</p>

<h3>Getting Data using JavaScript</h3>

<p>You can use an ajax request to request for the data from the Solr server. The easiest way to perform an ajax request is by using the jQuery library. In the example below were specifying the value for the request url to be the same as the url that were using to access the data directly from the browser. Were also specifying the type as <code>GET</code>, this means that we will perform a <code>GET</code> request to the server. The value used for the <code>dataType</code> is <code>jsonp</code> since the Solr server is running on a different port from the apache server on the local machine.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8080/solr/select?q=*:*&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;jsonp&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//do some magic with the data</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Getting Data using PHP</h3>

<p>You can get the data using PHP by using the <code>file_get_contents</code> method. Then you can convert the json string returned using the <code>json_decode</code> method. After that you can just loop through the data like a normal PHP array.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/solr/select?q=*:*&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$contents</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
</span><span class='line'><span class="nv">$data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$contents</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h3>Updating the Data using PHP</h3>

<p>You can update the data in Solr by updating the contents of the document that you want to update and then re-indexing it again using the <code>post.sh</code> utility. But you can also update the documents using PHP.</p>

<p>First get the data that you want to update:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/solr/select?q=*:*&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$contents</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
</span><span class='line'><span class="nv">$data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$contents</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'><span class="nv">$docs</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;response&#39;</span><span class="p">][</span><span class="s1">&#39;docs&#39;</span><span class="p">];</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Next do the updates. In the example below were adding a new field called course into the document. We also have to unset the version since Solr will be the one to update this attribute. Then we simply copy the current row into the <code>$new_docs</code> variable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$new_docs</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$docs</span> <span class="k">as</span> <span class="nv">$d</span><span class="p">){</span>
</span><span class='line'>  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$d</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
</span><span class='line'>  <span class="nv">$course</span> <span class="o">=</span> <span class="nx">get_course</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span><span class='line'>  <span class="nv">$d</span><span class="p">[</span><span class="s1">&#39;course&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$course</span><span class="p">;</span>
</span><span class='line'>  <span class="nb">unset</span><span class="p">(</span><span class="nv">$d</span><span class="p">[</span><span class="s1">&#39;_version_&#39;</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$new_docs</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$d</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Then we use <code>curl</code> to update the document in Solr. Solr allows you to update documents using the <code>update</code> path and the format in which the data passed is formatted. In this case its in json format.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$json_doc</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$new_docs</span><span class="p">);</span> <span class="c1">//convert the array to a json string</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>    <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">//curl will return something instead of directly outputting</span>
</span><span class='line'>    <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;Content-type:application/json&quot;</span><span class="p">),</span> <span class="c1">//specify content type as json</span>
</span><span class='line'>    <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://localhost:8080/solr/update/json&#39;</span><span class="p">,</span> <span class="c1">//the request url</span>
</span><span class='line'>    <span class="nx">CURLOPT_POST</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">//set the request type to POST</span>
</span><span class='line'>    <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="nv">$json_doc</span><span class="p">,</span> <span class="c1">//the data that we want to pass in</span>
</span><span class='line'><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span> <span class="c1">//execute, you can assign a variable to this to check if the request suceeded or not</span>
</span><span class='line'><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>The data has already been updated but it hasn&rsquo;t been committed yet. So we have to make a separate request to commit the recent changes. That is by using the parameter <code>commit</code> and specifying its value as <code>true</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="c1">//commit the changes</span>
</span><span class='line'><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
</span><span class='line'><span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://localhost:8080/solr/update?commit=true&#39;</span>
</span><span class='line'><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Once you check the results returned from the browser you&rsquo;ll see that the data has already been updated.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">http://localhost:8080/solr/select?q=*:*</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Conclusion</h2>

<p>That&rsquo;s it! We have only scratched the surface in this introduction to Solr.
Be sure to check out the resources below if you want to learn more about Solr.</p>

<h2>Resources</h2>

<ul>
<li><a href="http://bitnami.com/stacks">BitNami</a></li>
<li><a href="http://wiki.apache.org/solr/FrontPage">SolrWiki</a></li>
<li><a href="http://www.solrtutorial.com/">SolrTutorial</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/26/getting-started-with-wordpress-plugin-development/">Getting Started With Wordpress Plugin Development</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-26T16:22:00+08:00" pubdate data-updated="true">May 26<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this article I&rsquo;m going to walk you through process of creating Wordpress plugins.
First I&rsquo;m going to talk about some of the basic concepts in Wordpress plugin development like the actions, hooks, and API&rsquo;s that makes up Wordpress. Then were going to build a plugin where we apply some of the concepts and best practices in developing Wordpress plugins.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/26/getting-started-with-wordpress-plugin-development/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/19/my-windows-development-environment/">My Windows Development Environment</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-19T15:37:00+08:00" pubdate data-updated="true">May 19<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this article I&rsquo;m going to share some of the applications and development tools that I install on my Windows machine.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/19/my-windows-development-environment/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/13/how-to-get-a-job-in-the-web-development-industry/">How to Get a Job in the Web Development Industry</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-13T13:19:00+08:00" pubdate data-updated="true">May 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Want to get a job in the Web Development Industry? That&rsquo;s easy! You must know HTML, CSS, JavaScript and PHP.
Nah! Sometimes that is all you really need but most of the time you need to know more than that in order to get the job you want. In this article I&rsquo;m going to share to you some of the tips that has worked for me in finding a job in Web Development.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/13/how-to-get-a-job-in-the-web-development-industry/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/11/how-to-stay-healthy-as-a-developer/">How to Stay Healthy as a Developer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-11T19:14:00+08:00" pubdate data-updated="true">May 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Developers are not really the healthiest group of people in the planet simply because our faces are just buried in front of the computer 8 hours a day (or even more) 7 days a week. Were just sitting all day thinking of how to solve a problem, which technique to implement, and writing code.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/11/how-to-stay-healthy-as-a-developer/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/28/on-working-remotely/">On Working Remotely</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-28T17:52:00+08:00" pubdate data-updated="true">Apr 28<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&rsquo;s been a year since I started working remotely and I never regret any moment of it. In this post I&rsquo;m going to share some of my thoughts in working remotely. Some of the pros and cons, and how to stay productive even if there&rsquo;s no boss breathing down your neck.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/04/28/on-working-remotely/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/21/digging-into-chrome-dev-tools/">Digging Into Chrome Dev Tools</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-21T17:15:00+08:00" pubdate data-updated="true">Apr 21<span>st</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this article I&rsquo;m going to walk you through some of the things that we can do with the Chrome Developer Tools to improve our web development workflow.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/04/21/digging-into-chrome-dev-tools/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/13/this-crazy-world-of-web-development/">This Crazy World of Web Development</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-13T13:45:00+08:00" pubdate data-updated="true">Apr 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Need a css framework? There&rsquo;s Foundation, Bootstrap, HTML Kickstart, Kube, Skeleton, Baseline, Gumby, Ink, Groundwork.
There&rsquo;s also a bunch of others which are based from Bootstrap: Flatstrap, Metro Bootstrap.</p>

<p>Need a boilerplate? There&rsquo;s the HTML5 Boilerplate, 320 and up, HTML5Bones.</p>

<p>Need a package manager? There&rsquo;s component, ender, bower, jam, NPM.</p>

<p>Need a browser tool? There&rsquo;s Firebug, Chrome Developer tools, Page Speed Insights, JSON View, YSlow, MeasureIt, Colorzilla, CSS Usage, PageSpeed, SEO Doctor.</p>

<p>Need a coding tool? There&rsquo;s Codekit(for Mac), ScoutApp (for Windows), LiveReload, Yeoman, Grunt, Lumbar, Yeoman, Sublime Text, Brackets.</p>

<p>Need a css base? There&rsquo;s reset.css and normalize.css.</p>

<p>Need a CSS Compiler? There&rsquo;s SASS + Compass, LESS.</p>

<p>Need a validator/linting tool? There&rsquo;s JSLint, JSHint, JSON Lint, HTML Validator, CSS Validator.</p>

<p>Need a static site generator? There&rsquo;s Jekyll, Octopress, Middleman.</p>

<p>Need an MVC/MVP/MVVM Framework? There&rsquo;s Backbone, Ember, Knockout, Angular.</p>

<p>Tired of writing helper functions from scratch? There&rsquo;s underscore.js, sugar.js, lo-dash, yepnope.js, modernizr, accounting.js.</p>

<p>Need to work with SVG? There&rsquo;s Processing.js, Raphael.js, SVG Kit and SVG Web.</p>

<p>How about templating libraries? There&rsquo;s Smarty, Handlebars, Mustache, Hogan.js.</p>

<p>Need a JavaScript library? There&rsquo;s jQuery, Dojo, Mootools.</p>

<p>You think JavaScript is ugly? There&rsquo;s Coffeescript, TypeScript, Dart.</p>

<p>Want a back-end framework? There&rsquo;s Ruby on Rails for Ruby, Laravel for PHP, and Django for Python, Node.js.</p>

<p>Need a database? There&rsquo;s MySQL, PostgreSQL, MongoDB, CouchDB, RavenDB.</p>

<p>How about a Software Development Methodology? There&rsquo;s Waterfall, Prototyping, Spiral, RAD, Agile.</p>

<p>How about Design Patterns? There&rsquo;s Singleton, Adapater, Bridge, Facade, Factory and a bunch of others.</p>

<p>Heck there&rsquo;s a lot! The list is endless and it&rsquo;s hard to keep up.
There&rsquo;s always something new everyday.
There&rsquo;s always a new technology, methodology, library, and tool.
There&rsquo;s always a new blog post, video, and podcasts that speaks about these technologies, methodologies, libraries and tools.
There&rsquo;s always a new, cool and faster way to solve problems.</p>

<p>There&rsquo;s always this temptation (in most cases obsession) to check out all the shiny and new stuff, to read all those blog posts which speaks about them.
And before you know it there&rsquo;s no more time left for you to solve the real problems that needs solving.</p>

<p>Most of the tools, libraries and methodologies that comes out everyday is yet another way to solve existing problems.
The only difference is that its newer and it looks sexier. But sooner or later it becomes out of fashion and a shiny new thing will replace it again.</p>

<p>What&rsquo;s important is learning the core technology behind a library, so instead of learning jQuery, Mootools or Dojo we should first learn JavaScript. Instead of learning how to use Bootstrap or Foundation we should learn the basics and important concepts in CSS first. Core technologies that makes the whole platform (the web) work  never gets replaced thus it should be given the priority before the shiny and new stuff. And once your done learning the core technologies you&rsquo;re in a good position to try out some of the shiny and new stuff. And by try I mean giving it a go for a week or so and see if it feels right for you. If it feels right for you and you think it makes you more productive then you should definitely include it in your daily workflow.</p>

<p>Who cares if you&rsquo;re using MS Paint and not Photoshop. Who cares if you&rsquo;re using Notepad or Dreamweaver instead of Sublime Text. Who cares if you&rsquo;re still using <code>alert</code> instead of <code>console.log</code> to debug your JavaScript. If you think you&rsquo;re productive by using some of the old tools then why not right? At the end of the day it doesn&rsquo;t really matter what tools, libraries or methodologies we use as long as we get to solve problems and we make our clients happy by solving them.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/13/my-linux-development-environment/">My Linux Development Environment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/03/spatial-search-with-apache-solr-and-google-maps/">Spatial search with Apache Solr and Google Maps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/15/getting-started-with-solr/">Getting Started with Apache Solr</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/26/getting-started-with-wordpress-plugin-development/">Getting Started with Wordpress Plugin Development</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/19/my-windows-development-environment/">My Windows Development Environment</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/anchetawern">@anchetawern</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'anchetawern',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wernancheta?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wernancheta">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/104518132178203766400?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Wern Ancheta -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
